# generate BIG network
# 

mode multi-switch
participants 99

peers 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99

participant 1 1 PORT MAC 172.0.0.1/16
participant 2 2 PORT MAC 172.0.0.2/16
participant 3 3 PORT MAC 172.0.0.3/16
participant 4 4 PORT MAC 172.0.0.4/16
participant 5 5 PORT MAC 172.0.0.5/16
participant 6 6 PORT MAC 172.0.0.6/16
participant 7 7 PORT MAC 172.0.0.7/16
participant 8 8 PORT MAC 172.0.0.8/16
participant 9 9 PORT MAC 172.0.0.9/16
participant 10 10 PORT MAC 172.0.0.10/16
participant 11 11 PORT MAC 172.0.0.11/16
participant 12 12 PORT MAC 172.0.0.12/16
participant 13 13 PORT MAC 172.0.0.13/16
participant 14 14 PORT MAC 172.0.0.14/16
participant 15 15 PORT MAC 172.0.0.15/16
participant 16 16 PORT MAC 172.0.0.16/16
participant 17 17 PORT MAC 172.0.0.17/16
participant 18 18 PORT MAC 172.0.0.18/16
participant 19 19 PORT MAC 172.0.0.19/16
participant 20 20 PORT MAC 172.0.0.20/16
participant 21 21 PORT MAC 172.0.0.21/16
participant 22 22 PORT MAC 172.0.0.22/16
participant 23 23 PORT MAC 172.0.0.23/16
participant 24 24 PORT MAC 172.0.0.24/16
participant 25 25 PORT MAC 172.0.0.25/16
participant 26 26 PORT MAC 172.0.0.26/16
participant 27 27 PORT MAC 172.0.0.27/16
participant 28 28 PORT MAC 172.0.0.28/16
participant 29 29 PORT MAC 172.0.0.29/16
participant 30 30 PORT MAC 172.0.0.30/16
participant 31 31 PORT MAC 172.0.0.31/16
participant 32 32 PORT MAC 172.0.0.32/16
participant 33 33 PORT MAC 172.0.0.33/16
participant 34 34 PORT MAC 172.0.0.34/16
participant 35 35 PORT MAC 172.0.0.35/16
participant 36 36 PORT MAC 172.0.0.36/16
participant 37 37 PORT MAC 172.0.0.37/16
participant 38 38 PORT MAC 172.0.0.38/16
participant 39 39 PORT MAC 172.0.0.39/16
participant 40 40 PORT MAC 172.0.0.40/16
participant 41 41 PORT MAC 172.0.0.41/16
participant 42 42 PORT MAC 172.0.0.42/16
participant 43 43 PORT MAC 172.0.0.43/16
participant 44 44 PORT MAC 172.0.0.44/16
participant 45 45 PORT MAC 172.0.0.45/16
participant 46 46 PORT MAC 172.0.0.46/16
participant 47 47 PORT MAC 172.0.0.47/16
participant 48 48 PORT MAC 172.0.0.48/16
participant 49 49 PORT MAC 172.0.0.49/16
participant 50 50 PORT MAC 172.0.0.50/16
participant 51 51 PORT MAC 172.0.0.51/16
participant 52 52 PORT MAC 172.0.0.52/16
participant 53 53 PORT MAC 172.0.0.53/16
participant 54 54 PORT MAC 172.0.0.54/16
participant 55 55 PORT MAC 172.0.0.55/16
participant 56 56 PORT MAC 172.0.0.56/16
participant 57 57 PORT MAC 172.0.0.57/16
participant 58 58 PORT MAC 172.0.0.58/16
participant 59 59 PORT MAC 172.0.0.59/16
participant 60 60 PORT MAC 172.0.0.60/16
participant 61 61 PORT MAC 172.0.0.61/16
participant 62 62 PORT MAC 172.0.0.62/16
participant 63 63 PORT MAC 172.0.0.63/16
participant 64 64 PORT MAC 172.0.0.64/16
participant 65 65 PORT MAC 172.0.0.65/16
participant 66 66 PORT MAC 172.0.0.66/16
participant 67 67 PORT MAC 172.0.0.67/16
participant 68 68 PORT MAC 172.0.0.68/16
participant 69 69 PORT MAC 172.0.0.69/16
participant 70 70 PORT MAC 172.0.0.70/16
participant 71 71 PORT MAC 172.0.0.71/16
participant 72 72 PORT MAC 172.0.0.72/16
participant 73 73 PORT MAC 172.0.0.73/16
participant 74 74 PORT MAC 172.0.0.74/16
participant 75 75 PORT MAC 172.0.0.75/16
participant 76 76 PORT MAC 172.0.0.76/16
participant 77 77 PORT MAC 172.0.0.77/16
participant 78 78 PORT MAC 172.0.0.78/16
participant 79 79 PORT MAC 172.0.0.79/16
participant 80 80 PORT MAC 172.0.0.80/16
participant 81 81 PORT MAC 172.0.0.81/16
participant 82 82 PORT MAC 172.0.0.82/16
participant 83 83 PORT MAC 172.0.0.83/16
participant 84 84 PORT MAC 172.0.0.84/16
participant 85 85 PORT MAC 172.0.0.85/16
participant 86 86 PORT MAC 172.0.0.86/16
participant 87 87 PORT MAC 172.0.0.87/16
participant 88 88 PORT MAC 172.0.0.88/16
participant 89 89 PORT MAC 172.0.0.89/16
participant 90 90 PORT MAC 172.0.0.90/16
participant 91 91 PORT MAC 172.0.0.91/16
participant 92 92 PORT MAC 172.0.0.92/16
participant 93 93 PORT MAC 172.0.0.93/16
participant 94 94 PORT MAC 172.0.0.94/16
participant 95 95 PORT MAC 172.0.0.95/16
participant 96 96 PORT MAC 172.0.0.96/16
participant 97 97 PORT MAC 172.0.0.97/16
participant 98 98 PORT MAC 172.0.0.98/16
participant 99 99 PORT MAC 172.0.0.99/16

host AS ROUTER _ IP           # testnode names of form a1_100 a1_110

announce 1 100.0.0.0/24

announce 2 140.0.0.0/24
announce 3 140.0.0.0/24
announce 4 140.0.0.0/24
announce 5 140.0.0.0/24
announce 6 140.0.0.0/24
announce 7 140.0.0.0/24
announce 8 140.0.0.0/24
announce 9 140.0.0.0/24
announce 10 140.0.0.0/24
announce 11 140.0.0.0/24
announce 12 140.0.0.0/24
announce 13 140.0.0.0/24
announce 14 140.0.0.0/24
announce 15 140.0.0.0/24
announce 16 140.0.0.0/24
announce 17 140.0.0.0/24
announce 18 140.0.0.0/24
announce 19 140.0.0.0/24
announce 20 140.0.0.0/24
announce 21 140.0.0.0/24
announce 22 140.0.0.0/24
announce 23 140.0.0.0/24
announce 24 140.0.0.0/24
announce 25 140.0.0.0/24
announce 26 140.0.0.0/24
announce 27 140.0.0.0/24
announce 28 140.0.0.0/24
announce 29 140.0.0.0/24
announce 30 140.0.0.0/24
announce 31 140.0.0.0/24
announce 32 140.0.0.0/24
announce 33 140.0.0.0/24
announce 34 140.0.0.0/24
announce 35 140.0.0.0/24
announce 36 140.0.0.0/24
announce 37 140.0.0.0/24
announce 38 140.0.0.0/24
announce 39 140.0.0.0/24
announce 40 140.0.0.0/24
announce 41 140.0.0.0/24
announce 42 140.0.0.0/24
announce 43 140.0.0.0/24
announce 44 140.0.0.0/24
announce 45 140.0.0.0/24
announce 46 140.0.0.0/24
announce 47 140.0.0.0/24
announce 48 140.0.0.0/24
announce 49 140.0.0.0/24
announce 50 140.0.0.0/24
announce 51 140.0.0.0/24
announce 52 140.0.0.0/24
announce 53 140.0.0.0/24
announce 54 140.0.0.0/24
announce 55 140.0.0.0/24
announce 56 140.0.0.0/24
announce 57 140.0.0.0/24
announce 58 140.0.0.0/24
announce 59 140.0.0.0/24
announce 60 140.0.0.0/24
announce 61 140.0.0.0/24
announce 62 140.0.0.0/24
announce 63 140.0.0.0/24
announce 64 140.0.0.0/24
announce 65 140.0.0.0/24
announce 66 140.0.0.0/24
announce 67 140.0.0.0/24
announce 68 140.0.0.0/24
announce 69 140.0.0.0/24
announce 70 140.0.0.0/24
announce 71 140.0.0.0/24
announce 72 140.0.0.0/24
announce 73 140.0.0.0/24
announce 74 140.0.0.0/24
announce 75 140.0.0.0/24
announce 76 140.0.0.0/24
announce 77 140.0.0.0/24
announce 78 140.0.0.0/24
announce 79 140.0.0.0/24
announce 80 140.0.0.0/24
announce 81 140.0.0.0/24
announce 82 140.0.0.0/24
announce 83 140.0.0.0/24
announce 84 140.0.0.0/24
announce 85 140.0.0.0/24
announce 86 140.0.0.0/24
announce 87 140.0.0.0/24
announce 88 140.0.0.0/24
announce 89 140.0.0.0/24
announce 90 140.0.0.0/24
announce 91 140.0.0.0/24
announce 92 140.0.0.0/24
announce 93 140.0.0.0/24
announce 94 140.0.0.0/24
announce 95 140.0.0.0/24
announce 96 140.0.0.0/24
announce 97 140.0.0.0/24
announce 98 140.0.0.0/24
announce 99 140.0.0.0/24


flow a1 80 >> b
flow a1 4321 >> c
flow a1 4322 >> c

listener AUTOGEN 80 4321 4322 8888

test regress {
	test xfer
	withdraw b1 140.0.0.0/24
	exec a1 ip -s -s neigh flush all
	delay 2
	test xfer
	announce b1 140.0.0.0/24
	exec a1 ip -s -s neigh flush all
	delay 2
	test xfer
}
	
test init {
	listener
}

test xfer {
	verify a1_100 b1_140 80
	verify a1_100 c1_140 4321
	verify a1_100 c1_140 4322
	verify a1_100 b1_140 8888
}

test info {
	local ovs-ofctl dump-flows s1
	local ovs-ofctl dump-flows s2
	local ovs-ofctl dump-flows s3
	local ovs-ofctl dump-flows s4
	exec a1 ip route
	bgp a1
	exec b1 ip route
	bgp b1
	exec c1 ip route
	bgp c1
}
